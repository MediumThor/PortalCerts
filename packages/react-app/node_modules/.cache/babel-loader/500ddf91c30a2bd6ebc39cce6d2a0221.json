{"ast":null,"code":"import { BlockCipherMode } from './cipher-core.js';\nfunction generateKeystreamAndEncrypt(words, offset, blockSize, cipher) {\n  const _words = words;\n  let keystream;\n\n  // Shortcut\n  const iv = this._iv;\n\n  // Generate keystream\n  if (iv) {\n    keystream = iv.slice(0);\n\n    // Remove IV for subsequent blocks\n    this._iv = undefined;\n  } else {\n    keystream = this._prevBlock;\n  }\n  cipher.encryptBlock(keystream, 0);\n\n  // Encrypt\n  for (let i = 0; i < blockSize; i += 1) {\n    _words[offset + i] ^= keystream[i];\n  }\n}\n\n/**\n * Cipher Feedback block mode.\n */\nexport class CFB extends BlockCipherMode {}\nCFB.Encryptor = class extends CFB {\n  processBlock(words, offset) {\n    // Shortcuts\n    const cipher = this._cipher;\n    const {\n      blockSize\n    } = cipher;\n    generateKeystreamAndEncrypt.call(this, words, offset, blockSize, cipher);\n\n    // Remember this block to use with next block\n    this._prevBlock = words.slice(offset, offset + blockSize);\n  }\n};\nCFB.Decryptor = class extends CFB {\n  processBlock(words, offset) {\n    // Shortcuts\n    const cipher = this._cipher;\n    const {\n      blockSize\n    } = cipher;\n\n    // Remember this block to use with next block\n    const thisBlock = words.slice(offset, offset + blockSize);\n    generateKeystreamAndEncrypt.call(this, words, offset, blockSize, cipher);\n\n    // This block becomes the previous block\n    this._prevBlock = thisBlock;\n  }\n};","map":{"version":3,"names":["BlockCipherMode","generateKeystreamAndEncrypt","words","offset","blockSize","cipher","_words","keystream","iv","_iv","slice","undefined","_prevBlock","encryptBlock","i","CFB","Encryptor","processBlock","_cipher","call","Decryptor","thisBlock"],"sources":["/Users/ryan/Desktop/Arcanum/NFTS/tlatc/node_modules/crypto-es/lib/mode-cfb.js"],"sourcesContent":["import {\n  BlockCipherMode,\n} from './cipher-core.js';\n\nfunction generateKeystreamAndEncrypt(words, offset, blockSize, cipher) {\n  const _words = words;\n  let keystream;\n\n  // Shortcut\n  const iv = this._iv;\n\n  // Generate keystream\n  if (iv) {\n    keystream = iv.slice(0);\n\n    // Remove IV for subsequent blocks\n    this._iv = undefined;\n  } else {\n    keystream = this._prevBlock;\n  }\n  cipher.encryptBlock(keystream, 0);\n\n  // Encrypt\n  for (let i = 0; i < blockSize; i += 1) {\n    _words[offset + i] ^= keystream[i];\n  }\n}\n\n/**\n * Cipher Feedback block mode.\n */\nexport class CFB extends BlockCipherMode {\n}\nCFB.Encryptor = class extends CFB {\n  processBlock(words, offset) {\n    // Shortcuts\n    const cipher = this._cipher;\n    const { blockSize } = cipher;\n\n    generateKeystreamAndEncrypt.call(this, words, offset, blockSize, cipher);\n\n    // Remember this block to use with next block\n    this._prevBlock = words.slice(offset, offset + blockSize);\n  }\n};\nCFB.Decryptor = class extends CFB {\n  processBlock(words, offset) {\n    // Shortcuts\n    const cipher = this._cipher;\n    const { blockSize } = cipher;\n\n    // Remember this block to use with next block\n    const thisBlock = words.slice(offset, offset + blockSize);\n\n    generateKeystreamAndEncrypt.call(this, words, offset, blockSize, cipher);\n\n    // This block becomes the previous block\n    this._prevBlock = thisBlock;\n  }\n};\n"],"mappings":"AAAA,SACEA,eAAe,QACV,kBAAkB;AAEzB,SAASC,2BAA2BA,CAACC,KAAK,EAAEC,MAAM,EAAEC,SAAS,EAAEC,MAAM,EAAE;EACrE,MAAMC,MAAM,GAAGJ,KAAK;EACpB,IAAIK,SAAS;;EAEb;EACA,MAAMC,EAAE,GAAG,IAAI,CAACC,GAAG;;EAEnB;EACA,IAAID,EAAE,EAAE;IACND,SAAS,GAAGC,EAAE,CAACE,KAAK,CAAC,CAAC,CAAC;;IAEvB;IACA,IAAI,CAACD,GAAG,GAAGE,SAAS;EACtB,CAAC,MAAM;IACLJ,SAAS,GAAG,IAAI,CAACK,UAAU;EAC7B;EACAP,MAAM,CAACQ,YAAY,CAACN,SAAS,EAAE,CAAC,CAAC;;EAEjC;EACA,KAAK,IAAIO,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGV,SAAS,EAAEU,CAAC,IAAI,CAAC,EAAE;IACrCR,MAAM,CAACH,MAAM,GAAGW,CAAC,CAAC,IAAIP,SAAS,CAACO,CAAC,CAAC;EACpC;AACF;;AAEA;AACA;AACA;AACA,OAAO,MAAMC,GAAG,SAASf,eAAe,CAAC;AAEzCe,GAAG,CAACC,SAAS,GAAG,cAAcD,GAAG,CAAC;EAChCE,YAAYA,CAACf,KAAK,EAAEC,MAAM,EAAE;IAC1B;IACA,MAAME,MAAM,GAAG,IAAI,CAACa,OAAO;IAC3B,MAAM;MAAEd;IAAU,CAAC,GAAGC,MAAM;IAE5BJ,2BAA2B,CAACkB,IAAI,CAAC,IAAI,EAAEjB,KAAK,EAAEC,MAAM,EAAEC,SAAS,EAAEC,MAAM,CAAC;;IAExE;IACA,IAAI,CAACO,UAAU,GAAGV,KAAK,CAACQ,KAAK,CAACP,MAAM,EAAEA,MAAM,GAAGC,SAAS,CAAC;EAC3D;AACF,CAAC;AACDW,GAAG,CAACK,SAAS,GAAG,cAAcL,GAAG,CAAC;EAChCE,YAAYA,CAACf,KAAK,EAAEC,MAAM,EAAE;IAC1B;IACA,MAAME,MAAM,GAAG,IAAI,CAACa,OAAO;IAC3B,MAAM;MAAEd;IAAU,CAAC,GAAGC,MAAM;;IAE5B;IACA,MAAMgB,SAAS,GAAGnB,KAAK,CAACQ,KAAK,CAACP,MAAM,EAAEA,MAAM,GAAGC,SAAS,CAAC;IAEzDH,2BAA2B,CAACkB,IAAI,CAAC,IAAI,EAAEjB,KAAK,EAAEC,MAAM,EAAEC,SAAS,EAAEC,MAAM,CAAC;;IAExE;IACA,IAAI,CAACO,UAAU,GAAGS,SAAS;EAC7B;AACF,CAAC"},"metadata":{},"sourceType":"module"}